<script
	context="module"
	lang="ts">
	import { COLORS } from './_definitions';
	import { onMount } from 'svelte';

	export type LogoSize =
		| 8
		| 12
		| 16
		| 20
		| 24
		| 32
		| 48
		| 64
		| 128
		| 256
		| 512;

	export type LogoFillColor =
		| 'blue'
		| 'yellow'
		| 'pink'
		| 'green'
		| 'transparent';

	export type LogoColor = typeof COLORS.black | typeof COLORS.white;

	export type LogoProps = {
		color?: LogoColor;
		fill: LogoFillColor;
		size?: LogoSize;
		symbolOnly?: boolean;
	};
</script>

<script lang="ts">
	const ORIGINAL_WIDTH = 158;
	const ORIGINAL_HEIGHT = 24;
	const ASPECT_RATION = ORIGINAL_WIDTH / ORIGINAL_HEIGHT;
	const DEFAULT_SIZE: LogoSize = ORIGINAL_HEIGHT;
	// fill is not working
	let {
		color = COLORS.black,
		fill = 'blue',
		size = DEFAULT_SIZE,
		symbolOnly = false,
	} = $props<LogoProps>();

	let gradient: string[] = $state([
		COLORS.blueGradientStart,
		COLORS.blueGradientEnd,
	]);

	let width: number = $derived(symbolOnly ? size : size * ASPECT_RATION);
	let height: number = $state(size);

	let viewboxWidth: number = $derived(
		symbolOnly ? DEFAULT_SIZE : ORIGINAL_WIDTH
	);
	let viewboxHeight: number = ORIGINAL_HEIGHT;

	$effect.pre(() => {
		if (fill !== 'transparent') {
			const startColor = COLORS[`${fill}GradientStart`];
			const endColor = COLORS[`${fill}GradientEnd`];
			gradient = [startColor, endColor];
		}

		// height = size;
		// width = symbolOnly ? size : size * ASPECT_RATION;
		// viewboxWidth = symbolOnly ? DEFAULT_SIZE : ORIGINAL_WIDTH;
	});
</script>

<div
	class="sp-logo"
	style="height:{height}px; width: {width}px;">
	<svg
		width="100%"
		height="100%"
		viewBox="0 0 {viewboxWidth} {viewboxHeight}"
		fill="none"
		xmlns="http://www.w3.org/2000/svg">
		<defs>
			<linearGradient
				id="fill-gradient"
				x1="12"
				y1="3"
				x2="12"
				y2="21"
				gradientUnits="userSpaceOnUse">
				<stop stop-color={gradient[0]} />
				<stop
					offset="1"
					stop-color={gradient[1]} />
			</linearGradient>
		</defs>

		<g>
			{#if fill !== 'transparent'}
				<circle
					cx="12"
					cy="12"
					r="9"
					fill="url(#fill-gradient)" />
			{/if}
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M19.7071 0.292893C20.0976 0.683418 20.0976 1.31658 19.7071 1.70711L17.6596 3.75457C20.2811 5.55739 22 8.57796 22 12C22 17.5228 17.5228 22 12 22C10.6443 22 9.35166 21.7302 8.17276 21.2415L5.70711 23.7071C5.31658 24.0976 4.68342 24.0976 4.29289 23.7071C3.90237 23.3166 3.90237 22.6834 4.29289 22.2929L6.34036 20.2454C3.71888 18.4426 2 15.422 2 12C2 6.47715 6.47715 2 12 2C13.3557 2 14.6483 2.26976 15.8272 2.75854L18.2929 0.292893C18.6834 -0.0976311 19.3166 -0.0976311 19.7071 0.292893ZM9.73838 19.6758L14.7071 14.7071C15.0976 14.3166 15.0976 13.6834 14.7071 13.2929C14.3166 12.9024 13.6834 12.9024 13.2929 13.2929L7.78497 18.8008C5.51285 17.3896 4 14.8715 4 12C4 7.58172 7.58172 4 12 4C12.7855 4 13.5445 4.1132 14.2616 4.32416L9.29289 9.29289C8.90237 9.68342 8.90237 10.3166 9.29289 10.7071C9.68342 11.0976 10.3166 11.0976 10.7071 10.7071L16.215 5.19919C18.4872 6.6104 20 9.12853 20 12C20 16.4183 16.4183 20 12 20C11.2145 20 10.4555 19.8868 9.73838 19.6758Z"
				fill={color} />

			{#if !symbolOnly}
				<path
					fill-rule="evenodd"
					clip-rule="evenodd"
					d="M154.335 2.43C154.238 2.66 154.19 2.915 154.19 3.195C154.19 3.47166 154.238 3.725 154.335 3.955C154.435 4.185 154.568 4.38333 154.735 4.55C154.905 4.71333 155.103 4.84 155.33 4.93C155.56 5.02 155.805 5.065 156.065 5.065C156.325 5.065 156.568 5.02 156.795 4.93C157.022 4.84 157.218 4.71333 157.385 4.55C157.555 4.38333 157.688 4.185 157.785 3.955C157.885 3.725 157.935 3.47166 157.935 3.195C157.935 2.915 157.885 2.66 157.785 2.43C157.688 2.19666 157.555 1.99833 157.385 1.835C157.218 1.66833 157.022 1.54 156.795 1.45C156.568 1.35666 156.325 1.31 156.065 1.31C155.805 1.31 155.56 1.35666 155.33 1.45C155.103 1.54 154.905 1.66833 154.735 1.835C154.568 1.99833 154.435 2.19666 154.335 2.43ZM154.675 3.825C154.598 3.635 154.56 3.425 154.56 3.195C154.56 2.96166 154.598 2.75 154.675 2.56C154.755 2.37 154.862 2.20833 154.995 2.075C155.132 1.93833 155.292 1.83333 155.475 1.76C155.658 1.68333 155.855 1.645 156.065 1.645C156.278 1.645 156.477 1.68333 156.66 1.76C156.843 1.83333 157.002 1.93833 157.135 2.075C157.272 2.20833 157.377 2.37 157.45 2.56C157.527 2.75 157.565 2.96166 157.565 3.195C157.565 3.425 157.527 3.635 157.45 3.825C157.377 4.01166 157.272 4.17333 157.135 4.31C157.002 4.44333 156.843 4.54666 156.66 4.62C156.477 4.69333 156.278 4.73 156.065 4.73C155.855 4.73 155.658 4.69333 155.475 4.62C155.292 4.54666 155.132 4.44333 154.995 4.31C154.862 4.17333 154.755 4.01166 154.675 3.825ZM156.035 3.36H156.125L156.53 4.12H156.985L156.525 3.275C156.652 3.21833 156.743 3.14333 156.8 3.05C156.857 2.95666 156.885 2.855 156.885 2.745C156.885 2.615 156.863 2.51 156.82 2.43C156.777 2.35 156.715 2.28833 156.635 2.245C156.555 2.19833 156.457 2.16666 156.34 2.15C156.223 2.13333 156.092 2.125 155.945 2.125H155.335V4.12H155.745V3.36H156.035ZM156.345 2.51C156.432 2.55 156.475 2.63 156.475 2.75C156.475 2.84666 156.44 2.92 156.37 2.97C156.303 3.02 156.192 3.045 156.035 3.045H155.745V2.45H156.01C156.15 2.45 156.262 2.47 156.345 2.51ZM36.5637 12.64C35.9771 12.52 35.4171 12.3533 34.8837 12.14C34.3637 11.9267 33.9037 11.6533 33.5037 11.32C33.1171 10.9733 32.8037 10.5667 32.5637 10.1C32.3371 9.62001 32.2237 9.06667 32.2237 8.44001C32.2237 7.70667 32.3971 7.08001 32.7437 6.56001C33.1037 6.02667 33.5571 5.59334 34.1037 5.26001C34.6637 4.91334 35.2837 4.66001 35.9637 4.50001C36.6571 4.32667 37.3371 4.24001 38.0037 4.24001C38.7504 4.24001 39.4571 4.34667 40.1237 4.56C40.8037 4.77334 41.4037 5.08001 41.9237 5.48001C42.4437 5.86667 42.8571 6.34001 43.1637 6.90001C43.4837 7.46001 43.6637 8.08667 43.7037 8.78001H40.9437C40.8904 8.35334 40.7637 8.00001 40.5637 7.72001C40.3637 7.42667 40.1237 7.19334 39.8437 7.02001C39.5637 6.83334 39.2504 6.70667 38.9037 6.64001C38.5571 6.56001 38.2171 6.52001 37.8837 6.52001C37.5504 6.52001 37.2171 6.55334 36.8837 6.62001C36.5504 6.68667 36.2504 6.79334 35.9837 6.94001C35.7171 7.07334 35.4971 7.26 35.3237 7.50001C35.1637 7.72667 35.0837 8.00001 35.0837 8.32001C35.0837 8.82667 35.2704 9.22667 35.6437 9.52001C36.0304 9.81334 36.5171 10.0133 37.1037 10.12L39.0037 10.46C39.5904 10.5667 40.1771 10.7133 40.7637 10.9C41.3637 11.0867 41.8971 11.3467 42.3637 11.68C42.8437 12 43.2304 12.42 43.5237 12.94C43.8171 13.4467 43.9637 14.0733 43.9637 14.82C43.9637 15.5667 43.7904 16.22 43.4437 16.78C43.1104 17.3267 42.6637 17.7867 42.1037 18.16C41.5571 18.5333 40.9304 18.8133 40.2237 19C39.5304 19.1733 38.8171 19.26 38.0837 19.26C37.1904 19.26 36.3771 19.1467 35.6437 18.92C34.9237 18.68 34.2971 18.3467 33.7637 17.92C33.2304 17.48 32.8037 16.9533 32.4837 16.34C32.1637 15.7133 31.9704 15.0067 31.9037 14.22H34.6637C34.7437 14.7533 34.8904 15.2 35.1037 15.56C35.3171 15.9067 35.5771 16.1867 35.8837 16.4C36.2037 16.6133 36.5571 16.7667 36.9437 16.86C37.3437 16.94 37.7571 16.98 38.1837 16.98C38.5037 16.98 38.8304 16.9467 39.1637 16.88C39.5104 16.8133 39.8237 16.7067 40.1037 16.56C40.3971 16.4 40.6304 16.1933 40.8037 15.94C40.9904 15.6733 41.0837 15.3467 41.0837 14.96C41.0837 14.6533 41.0171 14.3933 40.8837 14.18C40.7504 13.9533 40.5637 13.7667 40.3237 13.62C40.0837 13.46 39.7971 13.3333 39.4637 13.24C39.1437 13.1333 38.7904 13.0467 38.4037 12.98L36.5637 12.64ZM108.12 19H110.88V4.5H108.12V19ZM147.388 5.32001H150.148V8.24001H152.388V10.14H150.148V15.7C150.148 16.2467 150.248 16.6067 150.448 16.78C150.661 16.94 151.014 17.02 151.508 17.02H152.348V19H150.328C149.714 19 149.214 18.9533 148.828 18.86C148.441 18.7533 148.141 18.5867 147.928 18.36C147.714 18.12 147.568 17.82 147.488 17.46C147.421 17.0867 147.388 16.6333 147.388 16.1V10.14H145.868V8.24001H147.388V5.32001ZM140.087 19.26C139.207 19.26 138.427 19.1133 137.747 18.82C137.081 18.5133 136.514 18.1 136.047 17.58C135.594 17.06 135.247 16.46 135.007 15.78C134.781 15.0867 134.667 14.3533 134.667 13.58C134.667 12.78 134.794 12.04 135.047 11.36C135.301 10.68 135.661 10.0933 136.127 9.6C136.594 9.09333 137.154 8.7 137.807 8.42C138.461 8.14 139.194 8 140.007 8C140.847 8 141.594 8.15333 142.247 8.46C142.914 8.76667 143.474 9.2 143.927 9.76C144.381 10.32 144.714 10.9933 144.927 11.78C145.154 12.5667 145.254 13.4333 145.227 14.38H137.427C137.454 15.18 137.707 15.84 138.187 16.36C138.667 16.8667 139.294 17.12 140.067 17.12C140.521 17.12 140.927 17.0333 141.287 16.86C141.661 16.6733 141.987 16.3467 142.267 15.88H145.107C144.961 16.28 144.754 16.68 144.487 17.08C144.234 17.48 143.901 17.8467 143.487 18.18C143.087 18.5 142.607 18.76 142.047 18.96C141.487 19.16 140.834 19.26 140.087 19.26ZM139.947 10.02C139.667 10.02 139.387 10.0733 139.107 10.18C138.827 10.2733 138.567 10.4267 138.327 10.64C138.101 10.84 137.907 11.0933 137.747 11.4C137.587 11.7067 137.487 12.0667 137.447 12.48H142.427C142.414 12.0267 142.334 11.6467 142.187 11.34C142.041 11.02 141.847 10.7667 141.607 10.58C141.381 10.38 141.121 10.24 140.827 10.16C140.547 10.0667 140.254 10.02 139.947 10.02ZM127.893 8.42C127.346 8.7 126.92 9.11333 126.613 9.66V8.24H123.853V19H126.613V13.4C126.613 12.9733 126.64 12.5667 126.693 12.18C126.76 11.7933 126.873 11.46 127.033 11.18C127.206 10.8867 127.433 10.6533 127.713 10.48C128.006 10.3067 128.38 10.22 128.833 10.22C129.22 10.22 129.533 10.2933 129.773 10.44C130.026 10.5733 130.22 10.76 130.353 11C130.486 11.24 130.573 11.52 130.613 11.84C130.666 12.1467 130.693 12.4733 130.693 12.82V19H133.453V12.22C133.453 10.8867 133.153 9.85333 132.553 9.12C131.966 8.37333 131.026 8 129.733 8C129.066 8 128.453 8.14 127.893 8.42ZM119.474 14.08C118.701 14.16 118.041 14.2467 117.494 14.34C116.947 14.4333 116.501 14.5533 116.154 14.7C115.807 14.8333 115.554 15.0067 115.394 15.22C115.234 15.42 115.154 15.6667 115.154 15.96C115.154 16.3467 115.307 16.68 115.614 16.96C115.921 17.24 116.387 17.38 117.014 17.38C117.881 17.38 118.507 17.14 118.894 16.66C119.281 16.18 119.474 15.5 119.474 14.62V14.08ZM119.694 17.62C119.307 18.1933 118.827 18.6133 118.254 18.88C117.694 19.1333 117.007 19.26 116.194 19.26C115.674 19.26 115.181 19.1867 114.714 19.04C114.247 18.8933 113.834 18.6867 113.474 18.42C113.127 18.1533 112.847 17.8267 112.634 17.44C112.421 17.04 112.314 16.6 112.314 16.12C112.314 15.48 112.481 14.9467 112.814 14.52C113.161 14.08 113.641 13.72 114.254 13.44C114.881 13.16 115.627 12.9333 116.494 12.76C117.374 12.5867 118.341 12.44 119.394 12.32V12.12C119.394 11.7067 119.341 11.36 119.234 11.08C119.127 10.7867 118.981 10.5533 118.794 10.38C118.621 10.2067 118.407 10.0867 118.154 10.02C117.901 9.93999 117.627 9.89999 117.334 9.89999C116.734 9.89999 116.234 10.04 115.834 10.32C115.447 10.6 115.241 11.04 115.214 11.64H112.634C112.687 11.1067 112.834 10.62 113.074 10.18C113.327 9.72666 113.661 9.33999 114.074 9.01999C114.501 8.68666 114.994 8.42666 115.554 8.23999C116.127 8.05332 116.754 7.95999 117.434 7.95999C118.101 7.95999 118.721 8.03999 119.294 8.19999C119.867 8.34666 120.367 8.59999 120.794 8.95999C121.221 9.31999 121.554 9.80666 121.794 10.42C122.034 11.02 122.154 11.7733 122.154 12.68C122.154 12.76 122.147 12.9067 122.134 13.12V13.82C122.134 14.0867 122.127 14.3667 122.114 14.66V15.44C122.114 16.2933 122.141 16.9867 122.194 17.52C122.247 18.0533 122.327 18.5467 122.434 19H119.894C119.854 18.8267 119.814 18.62 119.774 18.38C119.747 18.14 119.721 17.8867 119.694 17.62ZM101.434 17.14C102.194 17.14 102.781 16.82 103.194 16.18C103.621 15.54 103.834 14.6933 103.834 13.64C103.834 12.5867 103.621 11.74 103.194 11.1C102.781 10.4467 102.194 10.12 101.434 10.12C100.674 10.12 100.061 10.4333 99.5939 11.06C99.1405 11.6867 98.9139 12.54 98.9139 13.62C98.9139 14.7267 99.1405 15.5933 99.5939 16.22C100.061 16.8333 100.674 17.14 101.434 17.14ZM96.2539 22.5V8.24H99.0139V9.62C99.3072 9.11333 99.7272 8.72 100.274 8.44C100.821 8.14667 101.434 8 102.114 8C102.781 8 103.394 8.13333 103.954 8.4C104.527 8.66667 105.014 9.04667 105.414 9.54C105.827 10.0333 106.147 10.6267 106.374 11.32C106.614 12.0133 106.734 12.78 106.734 13.62C106.734 14.4867 106.614 15.2667 106.374 15.96C106.147 16.6533 105.821 17.2467 105.394 17.74C104.981 18.22 104.487 18.5933 103.914 18.86C103.354 19.1267 102.747 19.26 102.094 19.26C101.534 19.26 100.967 19.14 100.394 18.9C99.8205 18.66 99.3605 18.24 99.0139 17.64V22.5H96.2539ZM85.4122 20.38V22.5H86.5722C87.2388 22.5 87.7855 22.4533 88.2122 22.36C88.6522 22.28 89.0322 22.1067 89.3522 21.84C89.6722 21.5733 89.9588 21.1867 90.2122 20.68C90.4655 20.1867 90.7522 19.52 91.0722 18.68L95.0122 8.24001H92.2122L89.7122 16L87.2722 8.24001H84.2522L88.3722 18.96L88.2522 19.26C88.1322 19.54 88.0122 19.7533 87.8922 19.9C87.7855 20.06 87.6588 20.1733 87.5122 20.24C87.3788 20.32 87.2255 20.36 87.0522 20.36C86.8788 20.3733 86.6788 20.38 86.4522 20.38H85.4122ZM79.0059 19.26C78.1259 19.26 77.3459 19.1133 76.6659 18.82C75.9992 18.5133 75.4326 18.1 74.9659 17.58C74.5126 17.06 74.1659 16.46 73.9259 15.78C73.6992 15.0867 73.5859 14.3533 73.5859 13.58C73.5859 12.78 73.7126 12.04 73.9659 11.36C74.2192 10.68 74.5792 10.0933 75.0459 9.6C75.5126 9.09333 76.0726 8.7 76.7259 8.42C77.3792 8.14 78.1126 8 78.9259 8C79.7659 8 80.5126 8.15333 81.1659 8.46C81.8326 8.76667 82.3926 9.2 82.8459 9.76C83.2992 10.32 83.6326 10.9933 83.8459 11.78C84.0726 12.5667 84.1726 13.4333 84.1459 14.38H76.3459C76.3726 15.18 76.6259 15.84 77.1059 16.36C77.5859 16.8667 78.2126 17.12 78.9859 17.12C79.4392 17.12 79.8459 17.0333 80.2059 16.86C80.5792 16.6733 80.9059 16.3467 81.1859 15.88H84.0259C83.8792 16.28 83.6726 16.68 83.4059 17.08C83.1526 17.48 82.8192 17.8467 82.4059 18.18C82.0059 18.5 81.5259 18.76 80.9659 18.96C80.4059 19.16 79.7526 19.26 79.0059 19.26ZM78.8659 10.02C78.5859 10.02 78.3059 10.0733 78.0259 10.18C77.7459 10.2733 77.4859 10.4267 77.2459 10.64C77.0192 10.84 76.8259 11.0933 76.6659 11.4C76.5059 11.7067 76.4059 12.0667 76.3659 12.48H81.3459C81.3326 12.0267 81.2526 11.6467 81.1059 11.34C80.9592 11.02 80.7659 10.7667 80.5259 10.58C80.2992 10.38 80.0392 10.24 79.7459 10.16C79.4659 10.0667 79.1726 10.02 78.8659 10.02ZM70.6976 8.24001L68.1776 16.2L65.6576 8.24001H62.7576L66.6776 19H69.5776L73.4376 8.24001H70.6976ZM62.3842 10.9C62.1842 10.8733 61.9908 10.86 61.8042 10.86C61.6308 10.8467 61.4442 10.84 61.2442 10.84C60.8975 10.84 60.5842 10.88 60.3042 10.96C60.0375 11.0267 59.8042 11.1533 59.6042 11.34C59.4042 11.5267 59.2508 11.7867 59.1442 12.12C59.0375 12.44 58.9842 12.8533 58.9842 13.36V19H56.2242V8.24001H58.9442V10.12C59.2509 9.45334 59.6442 8.98001 60.1242 8.70001C60.6042 8.40667 61.1575 8.26001 61.7842 8.26001C61.8775 8.26001 61.9775 8.26667 62.0842 8.28001C62.1908 8.28001 62.2908 8.28667 62.3842 8.30001V10.9ZM50.6887 18.84C51.2487 18.5467 51.6821 18.1267 51.9887 17.58V19H54.7487V8.24001H51.9887V13.84C51.9887 14.2667 51.9554 14.6733 51.8887 15.06C51.8354 15.4467 51.7221 15.7867 51.5487 16.08C51.3887 16.3733 51.1621 16.6067 50.8687 16.78C50.5754 16.9533 50.2021 17.04 49.7487 17.04C49.3621 17.04 49.0487 16.9733 48.8087 16.84C48.5821 16.7067 48.4087 16.52 48.2887 16.28C48.1687 16.04 48.0887 15.7667 48.0487 15.46C48.0087 15.14 47.9887 14.8 47.9887 14.44V8.24001H45.2287V15.04C45.2287 16.36 45.5087 17.3933 46.0687 18.14C46.6287 18.8867 47.5554 19.26 48.8487 19.26C49.5154 19.26 50.1287 19.12 50.6887 18.84Z"
					fill={color} />
			{/if}
		</g>
	</svg>
</div>
